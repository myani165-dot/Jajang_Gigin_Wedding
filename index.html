<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jajang & Gina</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Carattere&family=Italianno&family=Sorts+Mill+Goudy:ital@0;1&family=Work+Sans:ital,wght@0,100..900;1,100..900&display=swap" 
      rel="stylesheet">

    <!-- simplyCountdown CSS-->
   <link rel="stylesheet" href="simplyCountdown.js-master\dist\themes\default.css">

   <!-- bootstrap icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">


    <link rel="stylesheet" href="style.css">
    
</head>

<body>

    <section id="hero" class="hero mx-auto text-center d-flex flex-column justify-content-center align-items-center text-white">
        <main>
            <h2>WALIMATUL 'URSY</h2>
            <h1>Jajang & Gigin</h1>
            <h4 class="mb-2">Kepada <span id="sapaan"></span></h4>
            <h4 id="nama-undangan" class="fw-bold mt-4"></h4>
            <a href="#home" class="btn btn-lg mt-4 btn-glow btn-bounce" onClick="enableScroll()">
                <i class="bi bi-envelope-open"></i>
                </i> Buka Undangan
            </a>

        </main>
    </section>

    <section id="home" class="home">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-8 text-center">
                    <h4>The Wedding Of</h4>
                    <h1>Jajang & Gigin</h1>
                    <p>Berharap Anda menjadi bagian 
                    <br> dari hari istimewa kami</p>
                    <a href="https://calendar.google.com/calendar/render?action=TEMPLATE&text=Pernikahan+Jajang+%26+Gina&dates=20250914T100000/20250914T120000&details=Resepsi+Pernikahan+Jajang+%26+Gigin+di+Rumah+Mempelai+Pria&location=Citali,+Pamulihan,+Sumedang&sf=true&output=xml" 
   target="_blank" class="btn btn-lg mt-1">
                        <i class="bi bi-calendar2-heart"></i>
                        </i> Save the Date
                    </a>
                    <h2>Minggu, 14 September 2025
                        <br>(21 Rabi'ul Awwal 1447 H)</h2>
                    <div class="simply-countdown my-4"></div>
                </div>
           </div>
        </div>
    </section>
    
    <section id="honey" class="honey mx-auto text-center d-flex flex-column justify-content-center align-items-center">
        <main>
          <div class="quote-wrapper">
            <p class="quote">"Dan di antara tanda-tanda (kebesaran)-Nya ialah Dia menciptakan pasangan-pasangan untukmu dari jenismu sendiri, agar kamu cenderung dan merasa tenteram kepadanya, dan Dia menjadikan di antaramu rasa kasih dan sayang. Sungguh, pada yang demikian itu benar-benar terdapat tanda-tanda (kebesaran Allah) bagi kaum yang berpikir". <br>(QS. Ar-Rum Ayat 21)</p>
            </div>
        </main>
    </section>

    <section id="mempelai" class="mempelai">
        <div class="container">
            <div class="row justify-content-center">
                    <img src="img/bismillah.png" alt="bismillah" class="img-responsive img-arab mb-3">
                <div class="col-md-8 text-center">
                    <h3>Assalamu'alaikum Warahmatullahi Wabarakatuh</h3>
                    <p>Dengan memohon rahmat dan ridho Allah SWT. <br>Tanpa mengurangi rasa hormat. Dengan segala kerendahan hati, kami mengundang Bapak/Ibu/Saudara/i untuk hadir pada acara pernikahan kami.</p>
                </div>
           <div class="row couple mt-5 text-center">
            <div class="col-md-4 col-12 mt-5">
              <img src="img/cowo.png" alt="Muhammad Nurjaman" class="img-responsive rounded-circle elegant-frame">
              <h3>Muhammad Nurjaman <br>(Jajang)</h3>
              <p>Putra kedua dari <br>Bapak Muhidin & Ibu Iroh</p>
            </div>

            <div class="col-lg-2 col-12 mt-5 d-flex justify-content-center align-items-center">
              <h3>&</h3>
            </div>

            <div class="col-md-4 col-12 mt-5">
              <img src="img/cewe.png" alt="Gina Guslina" class="img-responsive rounded-circle elegant-frame">
              <h3>Gina Guslina <br>(Gigin)</h3>
              <p>Putri bungsu dari <br>Bapak Supriatna & Ibu Tati Herawati (Almh)</p>
            </div>
          </div>
          </div>
          </div>
          </div>
        </div>
    </section>


    <section id="info" class="info py-5">
  <div class="container">
    <div class="row justify-content-center mb-4">
      <div class="col-md-8 text-center text-white">
        <h1>Save The Date</h1>
        <p class="quote">Insya Allah acara akan dilaksanakan pada:</p>
      </div>
    </div>

    <!-- Card Akad Nikah -->
    <div class="card-custom mb-4">
      <img src="img/mempelai.png" class="card-img-top" alt="Mempelai">
      <div class="card-body text-center">
        <h2>Akad Nikah</h2>
        <div class="icon-text">
          <p><i class="bi bi-calendar2-heart"></i> Jumat, 12 September 2025 
            <br>(19 Rabi'ul Awwal 1447 H)</p>
        </div>
        <div class="icon-text">
          <p><i class="bi bi-clock"></i> Pukul 08.00 WIB</p>
        </div>
        <div class="icon-text">
          <p><i class="bi bi-geo-alt-fill"></i> Rumah mempelai Wanita 
            <br>Dsn Babakan Bandung Rt/Rw 003/004 Desa Kutamandiri Kec. Tanjungsari Kab. Sumedang</p>
        </div>
        <a href="https://maps.app.goo.gl/Yo6fuTJqVENru1Gr5" target="_blank" class="btn btn-light btn-sm"><i class="bi bi-geo-alt-fill"></i>Lihat Lokasi</a>
      </div>
    </div>

    <!-- Card Resepsi -->
    <div class="card-resepsi mb-4">
      <div class="card-body text-center">
        <h2>Resepsi</h2>
        <div class="icon-text">
          <p><i class="bi bi-calendar2-heart"></i> Minggu, 14 September 2025 
            <br>(21 Rabi'ul Awwal 1447 H)</p>
        </div>
        <div class="icon-text">
          <p><i class="bi bi-clock"></i> Pukul 10.00 WIB - selesai</p>
        </div>
        <div class="icon-text">
          <p><i class="bi bi-geo-alt-fill"></i> Rumah mempelai Pria 
            <br>Dsn Babakanloa Rt/Rw 003/008 Desa Citali Kec. Pamulihan Kab. Sumedang</p>
        </div>
        <a href="https://maps.app.goo.gl/Gyqgg8gwwvw8MZSk6" target="_blank" class="btn btn-light btn-sm"><i class="bi bi-geo-alt-fill"></i>Lihat Lokasi</a>
      </div>
    </div>

  </div>
</section>

  <section id="plus" class="plus">
        <div class="container">
          <div class="row justify-content-center">
                <div class="col-md-8 col-10 text-center">
        <h1>Turut Mengundang</h1>
          </div>
        </div>
          <div class="card-mengundang mt-4">
            <div class="card-body text-center">
            <h5>PIHAK MEMPELAI PRIA</h5>
        <div class="icon-text">
            <p>Keluarga Besar Bapak Daim (Alm) <br>Keluarga Besar Bapak Ece (Alm)</p>
        </div>
        </div>
          </div>
          <div class="card-mengundang mt-4">
            <div class="card-body text-center">
        <h5>PIHAK MEMPELAI WANITA</h5>
        <div class="icon-text">
            <p>Keluarga Besar Bapak Djumhi (Alm) <br>Keluarga Besar Bapak Bichri (Alm)</p>
        </div>
          </div>
          </div>
        </div>        
      </section>

      <section id="gift" class="gift text-center">
        <div class="container">
          <div class="row justify-content-center">
            <div class="col-md-8 col-10 text-center">
              <h1 class="mb-4">Wedding Gift</h1>
              <p>Do'a restu Dan kehadiran Anda adalah hadiah terindah bagi kami. Dan jika memberi adalah ungkapan tanda kasih Anda, Anda dapat memberi kado secara langsung atau melalui transfer bank.</p>

              <!-- Tombol Amplop -->  
        <p>  
          <a id="giftToggleBtn" class="btn btn-primary btn-bounce btn-glow"  
             type="button" data-bs-toggle="collapse" data-bs-target="#giftcollapse"  
             aria-expanded="false" aria-controls="giftcollapse">  
            <i class="bi bi-envelope-paper-heart"></i> Amplop Online  
          </a>  
        </p>  

        <!-- Konten Amplop -->  
        <div class="collapse" id="giftcollapse">  
          <div class="card-body">  
            <div class="atm-card fade-slide">  
              <img src="img/atm.png" class="img-fluid" alt="Kartu ATM">  
              <div class="atm-text text-center">  
                <p><strong id="rekening">38101500068776</strong></p>  
                <p>a.n <strong>Muhammad Nurjaman</strong></p>  
                <button class="btn btn1 btn-outline-primary btn-bounce text-center text-white" id="copyBtn">  
                  <i class="bi bi-clipboard"></i> Salin No. Rekening  
                </button>  
              </div>  
            </div>  
          </div>  
        </div>  

        <!-- Tombol konfirmasi WA -->  
        <p class="mt-3">  
          <a href="https://api.whatsapp.com/send?phone=6289517841541&text=Assalamualaikum%20Warahmatullahi%20Wabarakatuh%2C%20saya%20[nama]%20ingin%20memberikan%20hadiah%20untuk%20Jajang%20dan%20Gigin.%20Saya%20sudah%20transfer%20ke%20rekening%20Muhammad%20Nurjaman%20Bank%20BTN%2038101500068776%20dengan%20nominal%20[jumlah]%20semoga%20berkah%20acaranya"  
             class="btn btn-primary btn-bounce btn-glow" target="_blank" id="confirmBtn">  
            <i class="bi bi-whatsapp"></i> Konfirmasi Amplop  
          </a>  
        </p>  

        <!-- Garis Kado -->  
        <div class="divider animate-on-scroll">  
          <span></span>  
          <i class="bi bi-gift"></i>  
          <span></span>  
        </div>  

        <!-- Tombol Kirim Kado -->  
        <a class="btn btn-primary btn-bounce btn-glow mb-3" type="button"  
           data-bs-toggle="collapse" data-bs-target="#giftAddressCollapse"  
           aria-expanded="false" aria-controls="giftAddressCollapse">  
          <i class="bi bi-gift"></i> Kirim Kado  
        </a>  

        <!-- Konten Alamat Kado -->  
        <div class="collapse mt-4" id="giftAddressCollapse">  
          <div class="card card-body shadow-sm address-card">  
            <p class="rumah text-center">  
              Rumah mempelai Wanita <br>  
              Dsn Babakan Bandung <br>  
              Desa Kutamandiri Kec. Tanjungsari Kab. Sumedang <br>  
              Rt/Rw 003/004  
              <br>  
              <button id="copyAddressBtn" class="btn btn2 btn-outline-primary btn-sm">  
                <i class="bi bi-clipboard"></i> Salin Alamat Kirim Kado  
              </button>  
            </p>  
          </div>  
        </div>  
      </div>  
    </div>  
</section>  

<!-- Toast -->  
<div class="position-fixed top-50 start-50 translate-middle p-3" style="z-index: 9999;">  
  <div id="copy-Toast" class="toast align-items-center border-0 denim-toast text-white big-toast"  
       role="alert" aria-live="assertive" aria-atomic="true">  
    <div class="d-flex justify-content-center">
    <div class="toast-body">  
      <i class="bi bi-check2-circle display-4 mb-3"></i>
         Berhasil!  
      </div>  
    </div>  
  </div>  
</div>  

    <section id="rsvv" class="rsvv py-5">
  <div class="rsvp-section container">

    <!-- Judul -->
    <div class="rs text-center mb-4">
      <h2 class="fw-bold">Ucapan & Do'a</h2>
      <p class="garis">Berikan ucapan dan do‚Äôa kepada mempelai</p>
    </div>

    <!-- Statistik Kehadiran -->
    <div class="card p-4 shadow-sm overlap-card">  
  <div id="stats" class="stats">  
<p class="text-center text-white"><span id="ucapan-count">0</span> Ucapan üíå</p>
  </div>  
       <div class="row justify-content-center text-center mb-4" style="color:#446d92;">
        <div class="col-4">
          <div class="card p-3 shadow-sm">
            <h4 id="count-hadir" class="fw-bold">0</h4>
            <small>Hadir</small>
          </div>
        </div>
        <div class="col-4">
          <div class="card p-3 shadow-sm">
            <h4 id="count-tidak" class="fw-bold">0</h4>
            <small>Tidak Hadir</small>
          </div>
        </div>
        <div class="col-4">
          <div class="card p-3 shadow-sm">
            <h4 id="count-ragu" class="fw-bold">0</h4>
            <small>Masih Ragu</small>
          </div>
        </div>
      </div>

     <!-- Form Utama RSVP -->
      <form id="my-form" class="mb-4">
        <input type="text" class="form-control mb-3" name="Nama" placeholder="Nama" required>
        <textarea class="form-control mb-3" name="Ucapan" rows="3" placeholder="Ucapan" required></textarea>
        <select class="form-select mb-3" name="Kehadiran" required>
          <option value="" disabled selected>Konfirmasi Kehadiran</option>
          <option value="Hadir">Hadir</option>
          <option value="Tidak">Tidak Hadir</option>
          <option value="Ragu">Masih Ragu</option>
        </select>
        <button type="submit" class="btn btn8 btn-primary">Kirim</button>
      </form>

      <div id="comment-container">
          <div id="comment-list"></div>
      </div>
         
      <!-- Pagination -->
      <nav aria-label="Page navigation" class="mt-3">
        <ul id="pagination" class="pagination justify-content-center"></ul>
      </nav>
    </div>
    </div>
  </div>
</section>

    
  <div id="audio-container">
    <audio id="song" autoplay loop>
      <source src="audio/Cinta Hingga Jannah (1).mp3" type="audio/mp3">
    </audio>

    <div class="audio-icon-wrapper" style="display: none;">
      <i class="bi bi-disc"></i>
    </div>
  </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q"
        crossorigin="anonymous"></script>

    <script src="simplyCountdown.js-master\dist\simplyCountdown.umd.js"></script>
  
  <script>
    simplyCountdown(".simply-countdown", {
      year: 2025, // Target year (required)
        month: 9, // Target month [1-12] (required)
        day: 14, // Target day [1-31] (required)
        hours: 10, // Target hour [0-23], default: 0
        words: { // Custom labels, with lambda for plurals
            days: { root: 'Hari', lambda: (root, n) => n > 1 ? root : root },
            hours: { root: 'Jam', lambda: (root, n) => n > 1 ? root  : root },
            minutes: { root: 'Menit', lambda: (root, n) => n > 1 ? root  : root },
            seconds: { root: 'Detik', lambda: (root, n) => n > 1 ? root  : root }
        },
    });
    
  </script>

  <script>
    document.addEventListener('DOMContentLoaded',function () {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) entry.target.classList.add('active');
        });
      }, { threshold: 0.3 });

      document.querySelectorAll('.quote').forEach((el) =>
    observer.observe(el));
    });
  </script>

  <script>
    const rootElement = document.querySelector(":root");
    const audioIconWrapper = document.querySelector('.audio-icon-wrapper');
    const audioIcon = document.querySelector('.audio-icon-wrapper i');
    const song = document.querySelector('#song');
    let isPlaying = false; 
      
      function disableScroll() { 
          scrollTop = window.pageYOffset || document.documentElement.scrollTop; 
          scrollLeft = window.pageXOffset || document.documentElement.scrollLeft;
          
          window.onscroll = function() { 
              window.scrollTo(scrollTop, scrollLeft); 
          } 
          
              rootElement.style.scrollBehavior = 'auto'; 
      }


    function enableScroll(){
  window.onscroll = function() {}
  rootElement.style.scrollBehavior = 'auto'; // jangan smooth sama sekali
  playAudio();

  const homeSection = document.querySelector('#home');
  const homeTop = homeSection.offsetTop;

  // Snap langsung ke #home
  window.scrollTo(0, homeTop);

  // Hapus hash dari URL
  history.replaceState(null, null, ' ');

  // Lock: cegah scroll lebih atas dari #home
  window.addEventListener('scroll', () => {
    if(window.scrollY < homeTop){
      window.scrollTo(0, homeTop); // langsung snap balik
    }
  });

  // Untuk jaga-jaga kalau pakai wheel atau touch ke atas
  function hardLock(e){
    if(window.scrollY <= homeTop){
      if(e.type === 'wheel' && e.deltaY < 0) e.preventDefault();
      if(e.type === 'touchmove' && e.touches[0].clientY > lastTouchY) e.preventDefault();
    }
    if(e.type === 'touchmove') lastTouchY = e.touches[0].clientY;
  }

  let lastTouchY = 0;
  window.addEventListener('touchstart', (e) => {
    lastTouchY = e.touches[0].clientY;
  }, {passive: false});
  window.addEventListener('wheel', hardLock, {passive: false});
  window.addEventListener('touchmove', hardLock, {passive: false});
}

    function playAudio(){
      song.volume = 0.1;
      audioIconWrapper.style.display = 'flex';
      song.play();
      isPlaying = true;
    }

    audioIconWrapper.onclick = function(){
      if(isPlaying){
        song.pause();
        audioIcon.classList.remove('bi-disc');
        audioIcon.classList.add('bi-pause-circle');
      } else {
        song.play();
        audioIcon.classList.add('bi-disc');
        audioIcon.classList.remove('bi-pause-circle');
      }

      isPlaying=!isPlaying;
    }

    // if(!localStorage.getItem('opened')) {
      // disableScroll();
    // }
    disableScroll();
  </script>
  
  <script>
    document.addEventListener('DOMContentLoaded', function () {  
    const collapseEl = document.getElementById('giftcollapse');  
    const toggleBtn  = document.getElementById('giftToggleBtn');  
    const animatedEls = collapseEl.querySelectorAll('.fade-slide');  

    // Tombol Amplop ubah teks  
    collapseEl.addEventListener('shown.bs.collapse', function () {  
      animatedEls.forEach(el => el.classList.add('showing'));  
      toggleBtn.innerHTML = '<i class="bi bi-envelope"></i> Tutup Amplop';  
      toggleBtn.classList.remove('btn-primary');  
      toggleBtn.classList.add('btn-info');  
      toggleBtn.blur();  
    });  

    collapseEl.addEventListener('hide.bs.collapse', function () {  
      animatedEls.forEach(el => el.classList.remove('showing'));  
      toggleBtn.innerHTML = '<i class="bi bi-envelope-paper-heart"></i> Amplop Online';  
      toggleBtn.classList.remove('btn-info');  
      toggleBtn.classList.add('btn-primary');  
      toggleBtn.blur();  
    });  

    // Animasi isi collapse  
    collapseEl.addEventListener('show.bs.collapse', function () {  
      animatedEls.forEach(el => {  
        el.classList.remove('is-visible');  
        void el.offsetWidth;  
      });  
    });  

    collapseEl.addEventListener('shown.bs.collapse', function () {  
      animatedEls.forEach((el, i) => {  
        setTimeout(() => el.classList.add('is-visible'), i * 100);  
      });  
    });  

     // --- Fungsi salin universal ---
  function copyText(text, btn, successLabel) {
    if (navigator.clipboard && window.isSecureContext) {
      navigator.clipboard.writeText(text)
        .then(() => afterCopy(btn, successLabel))
        .catch(() => fallbackCopy(text, btn, successLabel));
    } else {
      fallbackCopy(text, btn, successLabel);
    }
  }

    // --- Salin rekening ---  
    document.getElementById('copyBtn').addEventListener('click', function() {
      const rekening = document.getElementById('rekening').textContent.trim();
      copyText(rekening, this, "Nomor Disalin!");
      showToast(); 
    });

    // --- Salin alamat ---  
    document.getElementById('copyAddressBtn').addEventListener('click', function() {  
      const alamat = "Gina Guslina, Dsn Babakan Bandung Rt/Rw 003/004, Desa Kutamandiri, Kec. Tanjungsari, Kab. Sumedang";  
      copyText(alamat, this, "Alamat Disalin!");
        showToast();  
      });  
    });  
 
  // ===== Fungsi bantu =====  
  function fallbackCopy(text, btn, successLabel) {  
    const ta = document.createElement('textarea');  
    ta.value = text;  
    ta.style.position = 'fixed';  
    ta.style.opacity = '0';  
    document.body.appendChild(ta);  

    ta.focus();
    ta.select();  

    let ok = false;  
      try {
      const ok = document.execCommand("copy");
      if (ok) afterCopy(btn, successLabel);
    } catch (err) {
      alert("Silakan salin manual üôè");
    }
    document.body.removeChild(ta);
  }

  function afterCopy(btn, successLabel) {
     // Ganti teks tombol sementara
    const oldHTML = btn.innerHTML;
    btn.innerHTML = `<i class="bi bi-check"></i> ${successLabel}`;
    btn.classList.remove("btn-outline-primary");
    btn.classList.add("btn-success");

    setTimeout(() => {  
        btn.innerHTML = oldHTML;
      btn.classList.remove("btn-success");
      btn.classList.add("btn-outline-primary");
    }, 2000);
  }  

  function showToast() {  
    const toastEl = document.getElementById('copy-Toast');  
    const toast = new bootstrap.Toast(toastEl);  
    toast.show();  
  }  

  // Garis animasi  
  document.addEventListener("DOMContentLoaded", function() {  
    const observer = new IntersectionObserver((entries) => {  
      entries.forEach(entry => {  
        if (entry.isIntersecting) entry.target.classList.add("show");  
        else entry.target.classList.remove("show");  
      });  
    }, { threshold: 0.3 });

    document.querySelectorAll('.animate-on-scroll').forEach(el => observer.observe(el));  
  });  
  </script>

 <script>
  // Ambil parameter nama dan sapaan dari URL
  const urlParams = new URLSearchParams(window.location.search);
  const nama = urlParams.get('n') || '';
     
  
  const namaEl = document.querySelector('#nama-undangan');
 
  if(namaEl) namaEl.innerText = nama;
      </script>

    <script> 
        const form = document.getElementById('my-form'); 
        const commentList = document.getElementById('comment-list'); 
        const paginationEl = document.getElementById('pagination'); 
        let commentsData = []; 
        const pageSize = 5; 
        let currentPage = 1; 
        
        // Ambil data dari GSheet 
        async function loadComments() { 
            const res = await fetch("https://script.google.com/macros/s/AKfycbylGIXQj9H9oImopKDCv43jeCS-awXyGimoKZy9up3Zo1ye2fHCxzfI9szJuvEbbh68ZQ/exec"); 
            const data = await res.json(); 
            commentsData = data.sort((a,b) => new Date(b.Tanggal) - new Date(a.Tanggal)); 
            updateStats(); 
            renderComments(); 
        } 
        
        // Update statistik 
        function updateStats() { 
            const total = commentsData.length;
            const hadir = commentsData.filter(c => c.Kehadiran=='hadir').length; 
            const tidak = commentsData.filter(c => c.Kehadiran=='tidak').length; 
            const ragu = commentsData.filter(c => c.Kehadiran=='ragu').length; 
            const totalUcapan = commentsData.filter(c => { 
                const ucapanText = (c.Ucapan || "").toString().trim(); return ucapanText.length > 0; }).length; 
            
            document.getElementById('count-hadir').innerText = hadir; 
            document.getElementById('count-tidak').innerText = tidak; 
            document.getElementById('count-ragu').innerText = ragu; 
            document.getElementById("ucapan-count").textContent = totalUcapan; 
        } 
        
        // Render komentar + pagination 
        function renderComments() {
  const totalPage = Math.ceil(commentsData.length / pageSize);
  const start = (currentPage-1)*pageSize;
  const pageData = commentsData.slice(start, start+pageSize);

  commentList.innerHTML = '';
  pageData.forEach(c => {
    if(!c.Balasan) { // komentar utama
      const div = document.createElement('div');
      div.className = 'comment';
      div.style.padding = '10px 0';         // jarak dalam card
      div.style.borderBottom = '1px solid #ccc'; // border bawah saja

      div.innerHTML = `
      <div class="text-white">
        <div style="font-weight: bold; font-size: 1.5rem;">
          ${c.Nama} <span>[${c.Kehadiran}]</span>
        </div>
        <div style="margin:4px 0; font-size: 1.3rem; font-weight: normal;">
          ${c.Ucapan}
        </div>
        </div>
        <div class="text-muted small d-flex align-items-center">
        <div style="font-size: 1rem;">
          <i class="bi bi-clock me-1"></i> ${timeAgo(c.Tanggal)}
        </div>
        </div>
      `;
        
      commentList.appendChild(div);

    }
  });

  // Pagination
paginationEl.innerHTML = '';
const totalPages = Math.ceil(commentsData.length / pageSize);
for (let i = 1; i <= totalPages; i++) {
  const li = document.createElement('li');
  li.className = `page-item ${i === currentPage ? 'active' : ''}`;
  li.innerHTML = `<a class="page-link" href="#">${i}</a>`;
  li.onclick = e => {
    e.preventDefault();
    currentPage = i;
    renderComments();

    // Auto scroll ke atas kontainer komentar
    document.getElementById('comment-container').scrollTo({
      top: 0,
      behavior: 'smooth' // biar halus
    });
  };
  paginationEl.appendChild(li);
}
     }

        
        // Form submit 
        form.addEventListener('submit', async e => { 
            e.preventDefault(); 
            const formData = new FormData(form);
            const obj = Object.fromEntries(formData.entries());

            try{
            await fetch("https://script.google.com/macros/s/AKfycbylGIXQj9H9oImopKDCv43jeCS-awXyGimoKZy9up3Zo1ye2fHCxzfI9szJuvEbbh68ZQ/exec", { method: "POST", body: new URLSearchParams(obj) 
                                                                                                                                              }); 
            
            form.reset(); // kosongkan form 
            
            loadComments(); // refresh komentar 
            
            showToast(); // panggil toast yang sudah kamu punya 
        
        } catch(err) { console.error(err); // opsional: bisa bikin toast error juga 
                      
                      showToast(); // pakai toast yang sama untuk error (atau buat versi lain) 
        } 
                              });
        
        // Reply handling 
        function startReply(id) { 
            document.getElementById('Balasan').value = id; 
            document.getElementById('Ucapan').focus(); 
        } 
        
       // Format timestamp ala FB 
function timeAgo(dateStr){ 
    const date = new Date(dateStr); 
    const seconds = Math.floor((new Date() - date)/1000); 
    if(seconds<60) return 'Baru saja'; 
    const minutes = Math.floor(seconds/60); 
    if(minutes<60) return `${minutes} menit lalu`; 
    const hours = Math.floor(minutes/60); 
    if(hours<24) return `${hours} jam lalu`; 
    const days = Math.floor(hours/24); 
    if(days<7) return `${days} hari lalu`; 
    return date.toLocaleDateString(); 
} 

// Load awal
loadComments();

    </script>


</body>


</html>





















































































